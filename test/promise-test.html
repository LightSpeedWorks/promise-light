<!DOCTYPE html>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge, Chrome=1">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Thu, 01 Dec 1994 16:00:00 GMT">

<script>
this.$debug = true;
</script>
<script src="../lib/print.js"></script>
<script>
this.console = this.console || $print;
var c = this.$print || this.console;
c('$print');
c.log('console.log');
c.info('console.info');
c.warn('console.warn');
c.error('console.error');
</script>

<script src="../work/promise-light4.js"></script>
<script>
this.PromiseLight4 = this.PromiseLight;
if (this.Promise === this.PromiseLight4) this.Promise = undefined;
c.log('PromiseLight4', this.PromiseLight4.name);
</script>

<script src="../work/promise-light6.js"></script>
<script>
this.PromiseLight6 = this.PromiseLight;
if (this.Promise === this.PromiseLight6) this.Promise = undefined;
c.log('PromiseLight6', this.PromiseLight6.name);
</script>

<script src="../work/promise-light8.js"></script>
<script>
this.PromiseLight8 = this.PromiseLight;
if (this.Promise === this.PromiseLight8) this.Promise = undefined;
c.log('PromiseLight8', this.PromiseLight8.name);
</script>

<script src="../promise-light.js"></script>
<script src="../lib/assert.js"></script>
<script src="../lib/describe-it.js"></script>
<script>
this.bluebird = null;
this.require = function require() { return null; };
describe('describe1', function () {
	it('it1', function () {
		var p = new PromiseLight(function (res, rej) {
			res('ok');
		});
		c.info('describe1 - it1 - 1 - ' + p);
		p = p.then(
			function (v) { c.info('it1 ok? ' + v); return 'ok1'; },
			function (e) { c.error('it1 err? ' + e); return 'err1'; });
		c.info('describe1 - it1 - 2 - ' + p);
		return p;
	});
	it('it2', function () {
		var p = PromiseLight.resolve('ok');
		c.info('describe1 - it2 - 1 - ' + p);
		p = p.then(
			function (v) { c.info('it2 ok? ' + v); return 'ok2'; },
			function (e) { c.error('it2 err? ' + e); return 'err2'; });
		c.info('describe1 - it2 - 2 - ' + p);
		return p;
	});
});
</script>
<script src="promise-test.js"></script>
